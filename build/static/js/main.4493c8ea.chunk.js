(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(6),c=t(3),r=t(1),o=t(0),u=function(e){var n=e.name,t=e.no,a=e.handleButtonClick,c=e.id;return Object(o.jsxs)(o.Fragment,{children:[n," ",t,Object(o.jsx)("button",{onClick:a,value:c,children:"delete"}),Object(o.jsx)("br",{})]})},i=function(e){var n=e.personsToShow,t=e.handleButtonClick;return Object(o.jsx)(o.Fragment,{children:n.map((function(e){return Object(o.jsx)(u,{name:e.name,no:e.number,id:e.id,handleButtonClick:t},e.name)}))})},s=function(e){return Object(o.jsxs)("form",{onSubmit:e.addName,children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{children:"name:"}),Object(o.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{children:"number:"}),Object(o.jsx)("input",{value:e.newNo,onChange:e.handleNumberChange})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var n=e.searchName,t=e.handleSearch;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("label",{children:"filter shown with "}),Object(o.jsx)("input",{value:n,onChange:t})]})},l=function(e){var n=e.message,t=e.clss;return""===n?null:Object(o.jsx)("div",{className:t,children:n})},j=t(4),b=t.n(j),h="/api/persons",f={getAll:function(){return b.a.get(h).then((function(e){return e.data}))},create:function(e){return b.a.post(h,e).then((function(e){return e.data}))},remove:function(e){return b.a.delete("".concat(h,"/").concat(e))},update:function(e,n){return b.a.put("".concat(h,"/").concat(n),e).then((function(e){return e.data}))}},m=function(){var e=Object(r.useState)([]),n=Object(c.a)(e,2),t=n[0],u=n[1],j=Object(r.useState)(""),b=Object(c.a)(j,2),h=b[0],m=b[1],O=Object(r.useState)(""),v=Object(c.a)(O,2),x=v[0],p=v[1],g=Object(r.useState)(""),w=Object(c.a)(g,2),N=w[0],C=w[1],S=Object(r.useState)([]),k=Object(c.a)(S,2),y=k[0],B=k[1],A=Object(r.useState)(""),E=Object(c.a)(A,2),F=E[0],I=E[1],T=Object(r.useState)(""),D=Object(c.a)(T,2),J=D[0],L=D[1];Object(r.useEffect)((function(){f.getAll().then((function(e){return u(e)}))}),[]);var P=function(e,n){I(e),L(n),setTimeout((function(){I("")}),5e3)},R=""===N?t:y;return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(l,{message:F,clss:J}),Object(o.jsx)(d,{searchName:N,handleSearch:function(e){C(e.target.value);var n=new RegExp(e.target.value,"i");B(t.filter((function(e){return n.test(e.name)})))}}),Object(o.jsx)("h3",{children:"Add a new"}),Object(o.jsx)(s,{addName:function(e){e.preventDefault();var n=function(e,n){return e.find((function(e){return e.name.toLowerCase()===n.toLowerCase()}))}(t,h);if(n)if(window.confirm("".concat(h," is already added to the phonebook,replace with a new one?"))){var c=Object(a.a)(Object(a.a)({},n),{},{number:x});f.update(c,n.id).then((function(e){u(t.map((function(t){return t.id!==n.id?t:e}))),p(""),m(""),P("Number Changed of ".concat(c.name),"sucess")})).catch((function(e){P("Information of ".concat(c.name," has already been removed from the server"),"error"),u(t.filter((function(e){return e.id!==n.id})))}))}else m(""),p("");else{var r={name:h,number:x};f.create(r).then((function(e){u(t.concat(e)),m(""),p(""),P("Added ".concat(r.name),"sucess")}))}},handleNumberChange:function(e){p(e.target.value)},handleNameChange:function(e){m(e.target.value)},newName:h,newNo:x}),Object(o.jsx)("h3",{children:"Numbers"}),Object(o.jsx)(i,{personsToShow:R,handleButtonClick:function(e){var n=e.target.value,a=e.target.name;window.confirm("Delete ".concat(a))&&(f.remove(n).catch((function(e){P("Information of ".concat(a," has already been removed from the server"),"error"),u(t.filter((function(e){return e.id!==n})))})),u(t.filter((function(e){return e.id!==Number(n)}))))}})]})},O=t(15),v=t.n(O);t(39);v.a.render(Object(o.jsx)(m,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.4493c8ea.chunk.js.map