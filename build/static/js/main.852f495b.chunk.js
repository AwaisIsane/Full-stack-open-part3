(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(6),a=t(3),c=t(1),o=t(0),u=function(e){var n=e.name,t=e.no,r=e.handleButtonClick,a=e.id;return Object(o.jsxs)(o.Fragment,{children:[n," ",t,Object(o.jsx)("button",{onClick:r,value:a,children:"delete"}),Object(o.jsx)("br",{})]})},i=function(e){var n=e.personsToShow,t=e.handleButtonClick;return Object(o.jsx)(o.Fragment,{children:n.map((function(e){return Object(o.jsx)(u,{name:e.name,no:e.number,id:e.id,handleButtonClick:t},e.name)}))})},s=function(e){return Object(o.jsxs)("form",{onSubmit:e.addName,children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{children:"name:"}),Object(o.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{children:"number:"}),Object(o.jsx)("input",{value:e.newNo,onChange:e.handleNumberChange})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var n=e.searchName,t=e.handleSearch;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("label",{children:"filter shown with "}),Object(o.jsx)("input",{value:n,onChange:t})]})},l=function(e){var n=e.message,t=e.clss;return""===n?null:Object(o.jsx)("div",{className:t,children:n})},j=t(4),b=t.n(j),h="/api/persons",f={getAll:function(){return b.a.get(h).then((function(e){return e.data}))},create:function(e){return b.a.post(h,e).then((function(e){return e.data}))},remove:function(e){return b.a.delete("".concat(h,"/").concat(e))},update:function(e,n){return b.a.put("".concat(h,"/").concat(n),e).then((function(e){return e.data}))}},m=function(){var e=Object(c.useState)([]),n=Object(a.a)(e,2),t=n[0],u=n[1],j=Object(c.useState)(""),b=Object(a.a)(j,2),h=b[0],m=b[1],O=Object(c.useState)(""),v=Object(a.a)(O,2),p=v[0],x=v[1],g=Object(c.useState)(""),w=Object(a.a)(g,2),C=w[0],N=w[1],S=Object(c.useState)([]),k=Object(a.a)(S,2),y=k[0],B=k[1],A=Object(c.useState)(""),E=Object(a.a)(A,2),F=E[0],I=E[1],T=Object(c.useState)(""),D=Object(a.a)(T,2),J=D[0],L=D[1];Object(c.useEffect)((function(){f.getAll().then((function(e){return u(e)}))}),[]);var P=function(e,n){I(e),L(n),setTimeout((function(){I("")}),5e3)},R=""===C?t:y;return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(l,{message:F,clss:J}),Object(o.jsx)(d,{searchName:C,handleSearch:function(e){N(e.target.value);var n=new RegExp(e.target.value,"i");B(t.filter((function(e){return n.test(e.name)})))}}),Object(o.jsx)("h3",{children:"Add a new"}),Object(o.jsx)(s,{addName:function(e){e.preventDefault();var n=function(e,n){return e.find((function(e){return e.name.toLowerCase()===n.toLowerCase()}))}(t,h);if(n)if(window.confirm("".concat(h," is already added to the phonebook,replace with a new one?"))){var a=Object(r.a)(Object(r.a)({},n),{},{number:p});f.update(a,n.id).then((function(e){u(t.map((function(t){return t.id!==n.id?t:e}))),x(""),m(""),P("Number Changed of ".concat(a.name),"sucess")})).catch((function(e){"notPresent"!==e.response.data.error?P(e.response.data.error,"error"):(P("Information of ".concat(a.name," has already been removed from the server"),"error"),u(t.filter((function(e){return e.id!==n.id}))))}))}else m(""),x("");else{var c={name:h,number:p};f.create(c).then((function(e){u(t.concat(e)),m(""),x(""),P("Added ".concat(c.name),"sucess")})).catch((function(e){return P(e.response.data.error,"error")}))}},handleNumberChange:function(e){x(e.target.value)},handleNameChange:function(e){m(e.target.value)},newName:h,newNo:p}),Object(o.jsx)("h3",{children:"Numbers"}),Object(o.jsx)(i,{personsToShow:R,handleButtonClick:function(e){var n=e.target.value,r=e.target.name;window.confirm("Delete ".concat(r))&&(f.remove(n).catch((function(e){P("Information of ".concat(r," has already been removed from the server"),"error"),u(t.filter((function(e){return e.id!==n})))})),u(t.filter((function(e){return e.id!==n}))))}})]})},O=t(15),v=t.n(O);t(39);v.a.render(Object(o.jsx)(m,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.852f495b.chunk.js.map